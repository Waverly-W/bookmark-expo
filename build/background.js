"use strict";const o="网络连接异常，请稍后再试";function u(e){e.data===void 0&&(e.data={}),e.method=e.method||"post";let n={},a=null;e.formData?(a=new FormData,Object.keys(e.data).forEach(function(t){a.append(t,e.data[t])})):(n["Content-Type"]="application/json;charset=UTF-8",a=JSON.stringify(e.data));let d={method:e.method,headers:n,body:a};fetch(e.url,d).then(t=>t.json()).then(t=>{e.done&&e.done(),e.success&&e.success(t)}).catch(()=>{e.done&&e.done(),e.fail&&e.fail(o)})}chrome.runtime.onInstalled.addListener(function(){chrome.declarativeContent.onPageChanged.removeRules(void 0,()=>{const n=[{conditions:[],actions:[new chrome.declarativeContent.ShowAction]}];chrome.declarativeContent.onPageChanged.addRules(n)})});chrome.runtime.onMessage.addListener(function(e,n,a){return chrome.tabs.query({currentWindow:!0,active:!0},function(d){const{contentRequest:t}=e;if(t==="apiRequest"){let{config:r}=e;r.success=s=>{s.result="succ",a(s)},r.fail=s=>{a({result:"fail",msg:s})},u(r)}}),!0});
